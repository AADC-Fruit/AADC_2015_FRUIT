#include "Action.h"
#include "../vector2.h"
#include <math.h>

// -------------------------------------------------------------------------------------------------
Action::Action() {
// -------------------------------------------------------------------------------------------------
  x_diff_ = 0;
  y_diff_ = 0;
  constant_cost_diff_ = 0;
  linear_cost_diff_ = 1;
  angle_ = 0;
  speed_ = 0;
}

// -------------------------------------------------------------------------------------------------
Action::Action(int x_diff, int y_diff, int constant_cost_diff, float linear_cost_diff, int angle, int speed) {
// -------------------------------------------------------------------------------------------------
  x_diff_ = x_diff;
  y_diff_ = y_diff;
  constant_cost_diff_ = constant_cost_diff;
  linear_cost_diff_ = linear_cost_diff;
  angle_ = angle;
  speed_ = speed;
}

// -------------------------------------------------------------------------------------------------
int Action::x_diff() const {
// -------------------------------------------------------------------------------------------------
  return x_diff_;
}

// -------------------------------------------------------------------------------------------------
int Action::y_diff() const {
// -------------------------------------------------------------------------------------------------
  return y_diff_;
}

// -------------------------------------------------------------------------------------------------
int Action::constant_cost_diff() const {
// -------------------------------------------------------------------------------------------------
  return constant_cost_diff_;
}

// -------------------------------------------------------------------------------------------------
int Action::linear_cost_diff() const {
// -------------------------------------------------------------------------------------------------
  return linear_cost_diff_;
}

// -------------------------------------------------------------------------------------------------
int Action::angle() const {
// -------------------------------------------------------------------------------------------------
  return angle_;
}

// -------------------------------------------------------------------------------------------------
int Action::speed() const {
// -------------------------------------------------------------------------------------------------
  return speed_;
}

// -------------------------------------------------------------------------------------------------
float Action::compare(Action const & other) {
// -------------------------------------------------------------------------------------------------
    Vector2 this_action_vec(x_diff(), y_diff());
    Vector2 other_action_vec(other.x_diff(), other.y_diff());
    
    float angle = other_action_vec.computeAngle(this_action_vec);
    
    if (fabs(angle) > 90) {
      if (angle < 0) angle += 180;
      else angle -= 180;
    }
    
    return fabs(angle/90.0);
}
